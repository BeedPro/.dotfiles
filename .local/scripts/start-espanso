#!/bin/bash

# Determine the current session type
session_type="${XDG_SESSION_TYPE}"

# Default to espanso (Wayland) unless explicitly under X11
if [[ "$session_type" == "x11" ]]; then
    echo "Detected X11 session. Starting espanso-x11..."
    espanso-x11 start --unmanaged
elif [[ "$session_type" == "wayland" ]]; then
    echo "Detected Wayland session. Starting espanso..."
    espanso start --unmanaged
else
    echo "Unknown session type: $session_type"
    echo "Please start the correct version of espanso manually."
    exit 1
fi
